document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".ccpsa-main-nav-wrap"),t=e.querySelector(".ccpsa-main-nav-button"),n=document.querySelectorAll(".menu-item-has-children > a"),s=e.querySelector("#site-header-menu"),o=e.querySelector("#site-navigation");t&&(t.setAttribute("aria-expanded","false"),o.setAttribute("aria-expanded","false"),t.addEventListener("click",(function(){this.classList.toggle("toggled-on"),s.classList.toggle("toggled-on"),document.body.classList.toggle("menu-open");const e="true"===this.getAttribute("aria-expanded")?"false":"true";let t=this.getAttribute("aria-label");const n=this.querySelector("i");let i=n.getAttribute("class");this.setAttribute("aria-expanded",e),o.setAttribute("aria-expanded",e),t="Open menu"===t?"Close menu":"Open menu",this.setAttribute("aria-label",t),i="fa-solid fa-bars"===i?"fa-solid fa-xmark":"fa-solid fa-bars",n.setAttribute("class",i)}))),n.forEach((function(e){const t=e.textContent,n=document.createElement("button");n.className="dropdown-toggle",n.setAttribute("aria-expanded","false"),n.setAttribute("aria-label",t+" submenu"),e.insertAdjacentElement("afterend",n),n.addEventListener("toggle",(function(){const e=this.getAttribute("aria-expanded");this.setAttribute("aria-expanded",e)}))}));s.querySelectorAll(".dropdown-toggle").forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),this.classList.toggle("toggled-on");const t=this.nextElementSibling;t&&t.classList.contains("sub-menu")&&t.classList.toggle("toggled-on");const n="false"===this.getAttribute("aria-expanded")?"true":"false";this.setAttribute("aria-expanded",n);Array.from(this.parentElement.parentElement.children).map((e=>e.querySelector(".dropdown-toggle"))).filter((e=>null!==e&&e!==this)).forEach((e=>{e.classList.remove("toggled-on");const t=e.nextElementSibling;t&&t.classList.contains("sub-menu")&&t.classList.remove("toggled-on"),e.setAttribute("aria-expanded","false")}))}))}));document.querySelectorAll(".sub-menu .menu-item-has-children").forEach((function(e){e.parentElement.classList.add("has-sub-menu")}));document.querySelectorAll(".menu-item a, button.dropdown-toggle").forEach((function(e){e.addEventListener("keydown",(function(e){const n=e.keyCode,s=this.closest("ul").previousElementSibling,o=this.parentElement.previousElementSibling,i=this.parentElement.previousElementSibling;let l="",a="";if([27,37,38,39,40].includes(n))switch(n){case 27:e.preventDefault(),e.stopPropagation(),s&&s.classList.contains("dropdown-toggle")&&s.classList.contains("toggled-on")?(s.focus(),s.click()):s||t&&t.classList.contains("toggled-on")&&(t.click(),t.focus());break;case 37:e.preventDefault(),this.classList.contains("dropdown-toggle")?this.previousElementSibling.focus():o&&o.querySelector("button.dropdown-toggle")?o.querySelector("button.dropdown-toggle").focus():o&&o.querySelector("a")&&o.querySelector("a").focus();break;case 39:if(e.preventDefault(),this.nextElementSibling&&this.nextElementSibling.matches("button.dropdown-toggle"))this.nextElementSibling.focus();else{const e=this.parentElement.nextElementSibling;e&&e.querySelector("a").focus()}this.matches("ul.sub-menu .dropdown-toggle.toggled-on")&&this.parentElement.querySelector("ul.sub-menu li:first-child a").focus();break;case 40:if(e.preventDefault(),this.nextElementSibling)a=this.nextElementSibling.querySelector("li:first-child a"),a&&a.focus();else{const e=this.parentElement.nextElementSibling;e&&e.querySelector("a").focus()}break;case 38:e.preventDefault(),i?i.querySelector("a").focus():(l=this.closest("ul"),l&&l.previousElementSibling.matches(".dropdown-toggle.toggled-on")&&l.previousElementSibling.focus())}}))}));const i=document.querySelectorAll(".menu > .menu-item > a, .menu button.dropdown-toggle"),l=document.querySelectorAll(".sub-menu");i.forEach((function(e){e.addEventListener("focus",(e=>{"false"===e.target.getAttribute("aria-expanded")&&(i.forEach((function(e){e.setAttribute("aria-expanded",!1),e.classList.remove("toggled-on")})),l.forEach((function(e){e.classList.remove("toggled-on")})))}),!1)}))}));